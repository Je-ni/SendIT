{"version":3,"sources":["../../server/models/parcel.js"],"names":["database","require","pool","createTable","queryText","query","then","res","console","log","end","catch","err","dropTable","on","process","exit","module","exports"],"mappings":";;AAAA,IAAMA,WAAWC,QAAQ,oBAAR,CAAjB;;AAEA,IAAMC,OAAOF,UAAb;;AAEA;AACA,IAAMG,cAAc,SAAdA,WAAc,GAAM;AACxB,MAAMC,YAAY,yCACd,sBADc,GAEd,0DAFc,GAGd,yBAHc,GAId,wCAJc,GAKd,4BALc,GAMd,wBANc,GAOd,6BAPc,CAOgB;AAPhB,IAQd,8BARc,GASd,gCATc,GAUd,yBAVc,GAWd,uBAXc,GAYd,mBAZJ;AAaA;AACA;AACAF,OAAKG,KAAL,CAAWD,SAAX,EACGE,IADH,CACQ,UAACC,GAAD,EAAS;AACbC,YAAQC,GAAR,CAAYF,GAAZ;AACAL,SAAKQ,GAAL;AACD,GAJH,EAKGC,KALH,CAKS,UAACC,GAAD,EAAS;AACdJ,YAAQC,GAAR,CAAYG,GAAZ;AACAV,SAAKQ,GAAL;AACD,GARH;AASD,CAzBD;;AA2BA;AACA,IAAMG,YAAY,SAAZA,SAAY,GAAM;AACtB,MAAMT,YAAY,8BAAlB;AACAF,OAAKG,KAAL,CAAWD,SAAX,EACGE,IADH,CACQ,UAACC,GAAD,EAAS;AACbC,YAAQC,GAAR,CAAYF,GAAZ;AACAL,SAAKQ,GAAL;AACD,GAJH,EAKGC,KALH,CAKS,UAACC,GAAD,EAAS;AACdJ,YAAQC,GAAR,CAAYG,GAAZ;AACAV,SAAKQ,GAAL;AACD,GARH;AASD,CAXD;;AAaAR,KAAKY,EAAL,CAAQ,QAAR,EAAkB,YAAM;AACtBN,UAAQC,GAAR,CAAY,gBAAZ;AACAM,UAAQC,IAAR,CAAa,CAAb;AACD,CAHD;;AAKAC,OAAOC,OAAP,GAAiB;AACff,0BADe;AAEfU;AAFe,CAAjB;;AAKA;AACAZ,QAAQ,eAAR","file":"parcel.js","sourcesContent":["const database = require('../config/database');\r\n\r\nconst pool = database();\r\n\r\n// create table item in database\r\nconst createTable = () => {\r\n  const queryText = 'CREATE TABLE IF NOT EXISTS parcels ('\r\n    + 'id UUID PRIMARY KEY,'\r\n    + 'placedby UUID FOREIGN KEY references users(id) NOT NULL,'\r\n    + 'weight double NOT NULL,'\r\n    + 'weightmetric text default kg NOT NULL,'\r\n    + 'senton timestamp NOT NULL,'\r\n    + 'deliveredon timestamp,'\r\n    + 'status text default placed,' // placed, transiting or delivered\r\n    + 'active boolean default true,'\r\n    + 'currentlocation text NOT NULL,'\r\n    + 'sentfrom text NOT NULL,'\r\n    + 'sentto text NOT NULL,'\r\n    + 'description text)';\r\n  // eslint-disable-next-line semi\r\n  // eslint-disable-next-line no-unused-expressions\r\n  pool.query(queryText)\r\n    .then((res) => {\r\n      console.log(res);\r\n      pool.end();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      pool.end();\r\n    });\r\n};\r\n\r\n// drop database table\r\nconst dropTable = () => {\r\n  const queryText = 'DROP TABLE IF EXISTS parcels';\r\n  pool.query(queryText)\r\n    .then((res) => {\r\n      console.log(res);\r\n      pool.end();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n      pool.end();\r\n    });\r\n};\r\n\r\npool.on('remove', () => {\r\n  console.log('client removed');\r\n  process.exit(0);\r\n});\r\n\r\nmodule.exports = {\r\n  createTable,\r\n  dropTable\r\n};\r\n\r\n// eslint-disable-next-line import/no-extraneous-dependencies\r\nrequire('make-runnable');\r\n"]}