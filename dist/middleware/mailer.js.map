{"version":3,"sources":["../../server/middleware/mailer.js"],"names":["sendMail","userEmail","parcelId","subject","action","transporter","nodemailer","createTransport","service","secrets","emailServiceProvider","auth","user","emailUserName","pass","emailUserPassword","mailOptions","from","to","html","e","info","console","log","response"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,WAAW,SAAXA,QAAW,CAACC,SAAD,EAAYC,QAAZ,EAAsBC,OAAtB,EAA+BC,MAA/B,EAA0C;AACzD,MAAMC,cAAcC,qBAAWC,eAAX,CAA2B;AAC7CC,aAASC,cAAQC,oBAD4B;AAE7CC,UAAM;AACJC,YAAMH,cAAQI,aADV;AAEJC,YAAML,cAAQM;AAFV;AAFuC,GAA3B,CAApB;;AAQA,MAAMC,cAAc;AAClBC,UAAMR,cAAQI,aADI;AAElBK,QAAIjB,SAFc;AAGlBE,oBAHkB;AAIlBgB,mBAAahB,OAAb,kGAEmDA,OAFnD,qDAGwCD,QAHxC,kBAG4DE,MAH5D;AAJkB,GAApB;;AAaAC,cAAYL,QAAZ,CAAqBgB,WAArB,EAAkC,UAACI,CAAD,EAAIC,IAAJ,EAAa;AAC7C,QAAID,CAAJ,EAAO,OAAOE,QAAQC,GAAR,CAAYH,CAAZ,CAAP;AACP,WAAOE,QAAQC,GAAR,kBAA2BF,KAAKG,QAAhC,CAAP;AACD,GAHD;AAID,CA1BD;;kBA4BexB,Q","file":"mailer.js","sourcesContent":["import nodemailer from 'nodemailer';\r\nimport secrets from './ENV';\r\n\r\nconst sendMail = (userEmail, parcelId, subject, action) => {\r\n  const transporter = nodemailer.createTransport({\r\n    service: secrets.emailServiceProvider,\r\n    auth: {\r\n      user: secrets.emailUserName,\r\n      pass: secrets.emailUserPassword\r\n    }\r\n  });\r\n\r\n  const mailOptions = {\r\n    from: secrets.emailUserName,\r\n    to: userEmail,\r\n    subject,\r\n    html: `<h3>${subject}</h3>\r\n          <p> Hi there, <br>\r\n            please be informed that there has been a ${subject} \r\n            with respect to <b>parcel id: ${parcelId}</b> to '${action}'. \r\n            \r\n            Thank you for delivering with us. </p><br>\r\n            <i>If you're not satisfied with this action, please report by replying</i>`\r\n  };\r\n\r\n  transporter.sendMail(mailOptions, (e, info) => {\r\n    if (e) return console.log(e);\r\n    return console.log(`Email sent: ${info.response}`);\r\n  });\r\n};\r\n\r\nexport default sendMail;\r\n"]}