{"version":3,"sources":["../../server/config/database.js"],"names":["require","Client","secrets","default","env","process","NODE_ENV","connectionString","user","database","testDb","host","DATABASE_URL","ssl","client","connect"],"mappings":";;;;;;eAAmBA,QAAQ,IAAR,C;IAAXC,M,YAAAA,M,EAA0B;;;AAClC,IAAMC,UAAUF,QAAQ,mBAAR,EAA6BG,OAA7C;;AAEA,IAAMC,MAAMC,QAAQD,GAAR,CAAYE,QAAZ,IAAwB,aAApC;;AAEA,IAAIC,mBAAmB;AACrBC,QAAMN,QAAQM,IADO;AAErBC,YAAUP,QAAQQ,MAFG;AAGrBC,QAAMT,QAAQS;AAHO,CAAvB;AAKA,IAAIP,QAAQ,MAAZ,EAAoB;AAClBG,mBAAiBE,QAAjB,GAA4BP,QAAQQ,MAApC;AACD,CAFD,MAEO,IAAIN,QAAQ,aAAZ,EAA2B;AAChCG,mBAAiBE,QAAjB,GAA4BP,QAAQO,QAApC;AACD,CAFM,MAEA;AACLF,qBAAmB;AACjBA,sBAAkBF,QAAQD,GAAR,CAAYQ,YADb;AAEjBC,SAAK;AAFY,GAAnB;AAID;;AAED,IAAMC,SAAS,IAAIb,MAAJ,CAAWM,gBAAX,CAAf;;AAEAO,OAAOC,OAAP;;kBAEeD,M","file":"database.js","sourcesContent":["const { Client } = require('pg'); // used cause the code is run from terminal\r\nconst secrets = require('../middleware/ENV').default;\r\n\r\nconst env = process.env.NODE_ENV || 'development';\r\n\r\nlet connectionString = {\r\n  user: secrets.user,\r\n  database: secrets.testDb,\r\n  host: secrets.host,\r\n};\r\nif (env === 'test') {\r\n  connectionString.database = secrets.testDb;\r\n} else if (env === 'development') {\r\n  connectionString.database = secrets.database;\r\n} else {\r\n  connectionString = {\r\n    connectionString: process.env.DATABASE_URL,\r\n    ssl: true\r\n  };\r\n}\r\n\r\nconst client = new Client(connectionString);\r\n\r\nclient.connect();\r\n\r\nexport default client;\r\n"]}