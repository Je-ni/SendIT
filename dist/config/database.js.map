{"version":3,"sources":["../../server/config/database.js"],"names":["require","Pool","secrets","default","env","process","NODE_ENV","connectionString","user","database","testDb","host","DATABASE_URL","ssl","pool","on","console","log"],"mappings":";;;;;;eAAiBA,QAAQ,IAAR,C;IAATC,I,YAAAA,I,EAAwB;;;AAChC,IAAMC,UAAUF,QAAQ,mBAAR,EAA6BG,OAA7C;;AAEA,IAAMC,MAAMC,QAAQD,GAAR,CAAYE,QAAZ,IAAwB,aAApC;;AAEA,IAAIC,mBAAmB;AACrBC,QAAMN,QAAQM,IADO;AAErBC,YAAUP,QAAQQ,MAFG;AAGrBC,QAAMT,QAAQS;AAHO,CAAvB;AAKA,IAAIP,QAAQ,MAAZ,EAAoB;AAClBG,mBAAiBE,QAAjB,GAA4BP,QAAQQ,MAApC;AACD,CAFD,MAEO,IAAIN,QAAQ,aAAZ,EAA2B;AAChCG,mBAAiBE,QAAjB,GAA4BP,QAAQO,QAApC;AACD,CAFM,MAEA;AACLF,qBAAmB;AACjBA,sBAAkBF,QAAQD,GAAR,CAAYQ,YADb;AAEjBC,SAAK;AAFY,GAAnB;AAID;AACD,IAAMC,OAAO,IAAIb,IAAJ,CAASM,gBAAT,CAAb;;AAEAO,KAAKC,EAAL,CAAQ,SAAR,EAAmB;AAAA,SAAMC,QAAQC,GAAR,CAAY,iBAAZ,CAAN;AAAA,CAAnB;;kBAEeH,I","file":"database.js","sourcesContent":["const { Pool } = require('pg'); // used cause the code is run from terminal\r\nconst secrets = require('../middleware/ENV').default;\r\n\r\nconst env = process.env.NODE_ENV || 'development';\r\n\r\nlet connectionString = {\r\n  user: secrets.user,\r\n  database: secrets.testDb,\r\n  host: secrets.host,\r\n};\r\nif (env === 'test') {\r\n  connectionString.database = secrets.testDb;\r\n} else if (env === 'development') {\r\n  connectionString.database = secrets.database;\r\n} else {\r\n  connectionString = {\r\n    connectionString: process.env.DATABASE_URL,\r\n    ssl: true\r\n  };\r\n}\r\nconst pool = new Pool(connectionString);\r\n\r\npool.on('connect', () => console.log('connected to db'));\r\n\r\nexport default pool;\r\n"]}