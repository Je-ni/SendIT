{"version":3,"sources":["../../server/config/database.js"],"names":["require","Pool","secrets","default","env","process","NODE_ENV","db","testDb","database","module","exports","connectionString","user","host","pool","on","console","log"],"mappings":";;eAAiBA,QAAQ,IAAR,C;IAATC,I,YAAAA,I,EAAwB;;;AAChC,IAAMC,UAAUF,QAAQ,mBAAR,EAA6BG,OAA7C;;AAEA,IAAMC,MAAMC,QAAQD,GAAR,CAAYE,QAAZ,IAAwB,aAApC;;AAEA,IAAMC,KAAKH,QAAQ,MAAR,GAAiBF,QAAQM,MAAzB,GAAkCN,QAAQO,QAArD;;AAEAC,OAAOC,OAAP,GAAiB,YAAM;AACrB,MAAMC,mBAAmB;AACvBC,UAAMX,QAAQW,IADS;AAEvBJ,cAAUF,EAFa;AAGvBO,UAAMZ,QAAQY;AAHS,GAAzB;AAKA,MAAMC,OAAO,IAAId,IAAJ,CAASW,gBAAT,CAAb;AACAG,OAAKC,EAAL,CAAQ,SAAR,EAAmB;AAAA,WAAMC,QAAQC,GAAR,CAAY,iBAAZ,CAAN;AAAA,GAAnB;AACA,SAAOH,IAAP;AACD,CATD","file":"database.js","sourcesContent":["const { Pool } = require('pg'); // used cause the code is run from terminal\r\nconst secrets = require('../middleware/ENV').default;\r\n\r\nconst env = process.env.NODE_ENV || 'development';\r\n\r\nconst db = env === 'test' ? secrets.testDb : secrets.database;\r\n\r\nmodule.exports = () => {\r\n  const connectionString = {\r\n    user: secrets.user,\r\n    database: db,\r\n    host: secrets.host,\r\n  };\r\n  const pool = new Pool(connectionString);\r\n  pool.on('connect', () => console.log('connected to db'));\r\n  return pool;\r\n};\r\n"]}